{% include "docker-compose/components/cli-ssh-relay.yml.twig" with _context %}
{% include "docker-compose/components/cli.yml.twig" with _context %}
{% include "docker-compose/components/frontend.yml.twig" with _context %}

{% for group in projectData.groups %}
{% for applicationName, applicationData in group['applications'] %}
{% if applicationData['application'] != 'static' %}
{% include "application/" ~ (applicationData['application'] | lower) ~ ".yml.twig" with {
    applicationName: applicationName,
    applicationData: applicationData,
    regionName: group['region'],
    project: projectData
} %}
{% endif %}
{% endfor %}
{% endfor %}

{% for serviceName, serviceData in projectData.services %}
{% if serviceName not in sharedServices | keys  %}
{% set engine = serviceData['engine'] | lower %}
{% set version = serviceData['version'] | default('default') %}
{% include "service/" ~ engine ~ "/" ~ version ~ "/" ~  engine ~ ".yml.twig" with {
    project: projectData,
    _internal_project_name: projectData._internal_project_name,
    serviceName: serviceName,
    serviceData: serviceData,
    engine: engine,
    version: version
} only %}
{% endif %}
{% endfor %}

