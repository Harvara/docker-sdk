  {{ project_name ~ '_' ~ serviceName }}:
    image: redis:5.0-alpine
    container_name: {{ project_name ~ '_' ~ serviceName }}
    command: 'redis-server /usr/local/etc/redis/redis.conf --appendonly yes --save \"\"'
    networks:
      - {{ docker_sdk_project_name }}_private
    labels:
      'spryker.app.name': {{ project_name ~ '_' ~ serviceName }}
      'spryker.app.type': services
      'spryker.project': ${SPRYKER_DOCKER_PREFIX}:${SPRYKER_DOCKER_TAG}
    healthcheck:
      test: [ "CMD", "redis-cli", "ping" ]
      interval: 10s
      timeout: 5s
      retries: 5
    volumes:
      - {{project_name}}-{{ serviceName }}-{{ serviceData['engine'] }}-data:/data
      - {{ serviceData.deployment_path }}/context/redis/redis.conf:/usr/local/etc/redis/redis.conf:ro
{% if serviceData['replica-services'] is defined %}
{% for replica in serviceData['replica-services'] %}
  {{ project_name ~ '_' ~ serviceName }}_{{ replica }}:
    image: redis:5.0-alpine
    container_name: {{ project_name ~ '_' ~ serviceName }}_{{ replica }}
    command: "redis-server /usr/local/etc/redis/redis.conf --slaveof {{ serviceName }} 6379"
    depends_on:
      - {{ project_name ~ '_' ~ serviceName }}
    networks:
      - {{ docker_sdk_project_name }}_private
    labels:
      'spryker.app.name': {{ project_name ~ '_' ~ serviceName }}
      'spryker.app.type': services
      'spryker.project': ${SPRYKER_DOCKER_PREFIX}:${SPRYKER_DOCKER_TAG}
    healthcheck:
      test: [ "CMD", "redis-cli", "ping" ]
      interval: 10s
      timeout: 5s
      retries: 5
    volumes:
      - {{project_name}}-{{ serviceName }}-{{ serviceData['engine'] }}-data:/data
      - {{ serviceData.deployment_path }}/context/redis/redis.conf:/usr/local/etc/redis/redis.conf:ro

{% endfor %}
{% endif %}
